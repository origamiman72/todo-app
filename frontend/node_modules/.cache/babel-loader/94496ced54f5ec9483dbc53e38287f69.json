{"ast":null,"code":"var _jsxFileName = \"/Users/abhikahuja/Documents/Projects/todo-app/frontend/src/Calendar/Calendar.js\";\nimport React, { Component } from 'react';\nimport moment from 'moment';\nimport './calendar.scss';\nimport auth0Client from '../Auth';\nimport axios from 'axios';\nimport Task from '../Tasks/Task';\nimport MiniTask from '../Tasks/MiniTask';\nimport AddIcon from '@material-ui/icons/Add';\nimport IconButton from '@material-ui/core/IconButton';\nimport { Paper, TextField, Button } from '@material-ui/core';\nimport CategoryMenu from '../components/categoryMenu/categoryMenu';\nimport AddTask from '../Tasks/AddTask';\n\nclass AddCalendarTask extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {};\n  }\n\n  async componentDidMount() {\n    this.getCategories();\n  }\n\n  async getCategories() {\n    if (!auth0Client.isAuthenticated()) {\n      this.props.history.push('/');\n      return;\n    }\n\n    const categories = await axios.post(`http://localhost:8081/app/getCategories`, {\n      userId: auth0Client.getProfile().sub\n    }, {\n      headers: {\n        'Authorization': `Bearer ${auth0Client.getIdToken()}`\n      }\n    });\n    console.log(\"categories\", categories);\n    this.setState({\n      categories: categories.data.categories\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"fullScreen\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"dark-background\",\n      onClick: this.props.exitAddTask,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(AddTask, {\n      date: this.props.date,\n      prefilledDate: true,\n      refreshTasks: this.props.addTask,\n      className: \"addTask\",\n      categories: this.state.categories,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 17\n      }\n    }));\n  }\n\n}\n\nclass Calendar extends Component {\n  constructor(props) {\n    super(props);\n\n    this.firstDayOfMonth = () => {\n      let dateObject = this.state.dateObject;\n      let firstDay = moment(dateObject).startOf(\"month\").format(\"d\");\n      return firstDay;\n    };\n\n    this.addTask = this.addTask.bind(this);\n    this.exitAddTask = this.exitAddTask.bind(this);\n    var now = moment();\n    this.state = {\n      taskList: [],\n      dateObject: now,\n      month: now.month(),\n      year: now.year()\n    };\n  }\n\n  async componentDidMount() {\n    if (!auth0Client.isAuthenticated()) {\n      this.props.history.push('/');\n      return;\n    }\n\n    const tasks = await axios.post(`http://localhost:8081/app/`, {\n      userId: auth0Client.getProfile().sub\n    }, {\n      headers: {\n        'Authorization': `Bearer ${auth0Client.getIdToken()}`\n      }\n    });\n    this.setState({\n      taskList: tasks.data.todoTasks,\n      addingTask: false\n    });\n  }\n\n  addTask(task) {\n    var tasks = this.state.taskList.slice();\n    tasks.push(task);\n    this.setState({\n      taskList: tasks,\n      addingTask: false\n    });\n  }\n\n  exitAddTask() {\n    this.setState({\n      addingTask: false\n    });\n  }\n\n  render() {\n    var weekdayshort = moment.weekdaysShort();\n    let blanks = [];\n\n    for (let i = 0; i < this.firstDayOfMonth(); i++) {\n      blanks.push( /*#__PURE__*/React.createElement(\"td\", {\n        className: \"empty\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 13\n        }\n      }, \"\"));\n    }\n\n    let relevantTasks = [];\n\n    for (let i = 0; i < this.state.taskList.length; i++) {\n      var curr = this.state.taskList[i];\n\n      if (curr.dueDate) {\n        if (moment(curr.dueDate).month() === this.state.dateObject.month()) {\n          relevantTasks.push(curr);\n        }\n      }\n    }\n\n    let daysInMonth = [];\n    var overdue = true;\n\n    for (let i = 0; i < this.state.dateObject.daysInMonth(); i++) {\n      var todayTasks = [];\n\n      for (let j = 0; j < relevantTasks.length; j++) {\n        var currTask = relevantTasks[j];\n\n        if (moment(currTask.dueDate).date() == i + 1) {\n          todayTasks.push(currTask);\n        }\n      }\n\n      let currentDay = i + 1 == moment().date() ? \"today\" : \"\";\n\n      if (currentDay) {\n        overdue = false;\n      }\n\n      daysInMonth[i] = /*#__PURE__*/React.createElement(\"td\", {\n        key: i + 1\n        /*className={`calendar-day ${currentDay}`} */\n        ,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: `calendar-day ${currentDay}`,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex justify-content-between day-header\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 25\n        }\n      }, i + 1), /*#__PURE__*/React.createElement(IconButton, {\n        size: \"small\",\n        className: \"hover-only\",\n        onClick: () => {\n          var curr = moment().year(this.state.year).month(this.state.month).date(i + 1);\n          console.log(curr);\n          this.setState({\n            addingTask: true,\n            addTaskDate: curr\n          });\n          console.log(this.state);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(AddIcon, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 29\n        }\n      }))), /*#__PURE__*/React.createElement(\"ul\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 21\n        }\n      }, todayTasks.map(task => /*#__PURE__*/React.createElement(\"li\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(MiniTask, {\n        overdue: overdue,\n        content: task.content,\n        key: task._id,\n        id: task._id,\n        complete: task.completed,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 29\n        }\n      }))))));\n    }\n\n    var totalSlots = [...blanks, ...daysInMonth];\n    let rows = [];\n    let cells = [];\n    totalSlots.forEach((row, i) => {\n      if (i % 7 !== 0) {\n        cells.push(row);\n      } else {\n        rows.push(cells);\n        cells = [];\n        cells.push(row);\n      }\n\n      if (i === totalSlots.length - 1) {\n        rows.push(cells);\n      }\n    });\n    let weekdayshortname = weekdayshort.map(day => {\n      return /*#__PURE__*/React.createElement(\"th\", {\n        key: day,\n        className: \"weekday-label\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 197,\n          columnNumber: 17\n        }\n      }, day);\n    });\n    let daysinmonth = rows.map((d, i) => {\n      return /*#__PURE__*/React.createElement(\"tr\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 20\n        }\n      }, d);\n    });\n    return (\n      /*#__PURE__*/\n      // <div>Calendar</div>\n      React.createElement(\"div\", {\n        className: \"container d-flex justify-content-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 209,\n          columnNumber: 13\n        }\n      }, this.state.addingTask && /*#__PURE__*/React.createElement(AddCalendarTask, {\n        addTask: this.addTask,\n        exitAddTask: this.exitAddTask,\n        date: this.state.addTaskDate,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 210,\n          columnNumber: 43\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"calendar\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 211,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"calendar-month\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 212,\n          columnNumber: 21\n        }\n      }, this.state.dateObject.format(\"MMMM\")), /*#__PURE__*/React.createElement(\"table\", {\n        className: \"\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 213,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"thead\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 214,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"tr\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 215,\n          columnNumber: 29\n        }\n      }, weekdayshortname)), /*#__PURE__*/React.createElement(\"tbody\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 217,\n          columnNumber: 25\n        }\n      }, daysinmonth))))\n    );\n  }\n\n}\n\nexport default Calendar;","map":{"version":3,"sources":["/Users/abhikahuja/Documents/Projects/todo-app/frontend/src/Calendar/Calendar.js"],"names":["React","Component","moment","auth0Client","axios","Task","MiniTask","AddIcon","IconButton","Paper","TextField","Button","CategoryMenu","AddTask","AddCalendarTask","constructor","props","state","componentDidMount","getCategories","isAuthenticated","history","push","categories","post","userId","getProfile","sub","headers","getIdToken","console","log","setState","data","render","exitAddTask","date","addTask","Calendar","firstDayOfMonth","dateObject","firstDay","startOf","format","bind","now","taskList","month","year","tasks","todoTasks","addingTask","task","slice","weekdayshort","weekdaysShort","blanks","i","relevantTasks","length","curr","dueDate","daysInMonth","overdue","todayTasks","j","currTask","currentDay","addTaskDate","map","content","_id","completed","totalSlots","rows","cells","forEach","row","weekdayshortname","day","daysinmonth","d"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport moment from 'moment';\nimport './calendar.scss';\nimport auth0Client from '../Auth';\nimport axios from 'axios';\nimport Task from '../Tasks/Task';\nimport MiniTask from '../Tasks/MiniTask';\nimport AddIcon from '@material-ui/icons/Add';\nimport IconButton from '@material-ui/core/IconButton';\nimport { Paper, TextField, Button } from '@material-ui/core';\nimport CategoryMenu from '../components/categoryMenu/categoryMenu';\nimport AddTask from '../Tasks/AddTask';\n\nclass AddCalendarTask extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n\n        }\n    }\n\n    async componentDidMount() {\n        this.getCategories();\n    }\n\n    async getCategories() {\n        if (!auth0Client.isAuthenticated()) {\n            this.props.history.push('/');\n            return;\n        }\n\n        const categories = await axios.post(`http://localhost:8081/app/getCategories`, {\n            userId: auth0Client.getProfile().sub,\n        }, {\n            headers: {'Authorization': `Bearer ${auth0Client.getIdToken()}`}\n        });\n\n        console.log(\"categories\", categories);\n\n        this.setState({\n            categories: categories.data.categories,\n        })\n    }\n\n    render() {\n        return (\n            <div className=\"fullScreen\">\n                <div className=\"dark-background\" onClick={this.props.exitAddTask}></div>\n                <AddTask date={this.props.date} prefilledDate refreshTasks={this.props.addTask} className=\"addTask\" categories={this.state.categories}/>\n            </div>\n        )\n    }\n\n}\n\nclass Calendar extends Component {\n    constructor(props) {\n        super(props);\n\n        this.addTask = this.addTask.bind(this);\n        this.exitAddTask = this.exitAddTask.bind(this);\n\n        var now = moment();\n\n        this.state = {\n            taskList: [],\n            dateObject: now,\n            month: now.month(),\n            year: now.year(),\n        }\n    }\n\n    async componentDidMount() {\n        if (!auth0Client.isAuthenticated()) {\n            this.props.history.push('/');\n            return;\n        }\n\n        const tasks = await axios.post(`http://localhost:8081/app/`, {\n            userId: auth0Client.getProfile().sub,\n        }, {\n            headers: {'Authorization': `Bearer ${auth0Client.getIdToken()}`}\n        });\n\n        this.setState({\n            taskList: tasks.data.todoTasks,\n            addingTask: false,\n        })\n    }\n\n    addTask(task) {\n        var tasks = this.state.taskList.slice();\n        tasks.push(task);\n\n        this.setState({\n            taskList: tasks,\n            addingTask: false,\n        })\n    }\n\n    firstDayOfMonth = () => {\n        let dateObject = this.state.dateObject;\n        let firstDay = moment(dateObject).startOf(\"month\").format(\"d\");\n        return firstDay;\n    }\n\n    exitAddTask() {\n        this.setState({\n            addingTask: false,\n        })\n    }\n\n    render() {\n        var weekdayshort = moment.weekdaysShort();\n        let blanks = [];\n        for (let i = 0; i < this.firstDayOfMonth(); i++) {\n            blanks.push(\n            <td className=\"empty\">{\"\"}</td>\n            )\n        }\n\n        let relevantTasks = [];\n        for (let i = 0; i < this.state.taskList.length; i++) {\n            var curr = this.state.taskList[i];\n            if (curr.dueDate) {\n                if (moment(curr.dueDate).month() === this.state.dateObject.month()) {\n                    relevantTasks.push(curr);\n                }\n            }\n        }\n\n        let daysInMonth = [];\n        var overdue = true;\n        for (let i = 0; i < this.state.dateObject.daysInMonth(); i++) {\n            var todayTasks = [];\n            for (let j = 0; j < relevantTasks.length; j++) {\n                var currTask = relevantTasks[j];\n                if (moment(currTask.dueDate).date() == i + 1) {\n                    todayTasks.push(currTask);\n                }\n\n            }\n            let currentDay = i + 1 == moment().date() ? \"today\" : \"\";   \n            if (currentDay) {\n                overdue = false;\n            }\n            daysInMonth[i] =\n                <td key={i + 1} /*className={`calendar-day ${currentDay}`} */>\n                <div className={`calendar-day ${currentDay}`}>\n                    <div className=\"d-flex justify-content-between day-header\">\n                        <div>{i + 1}</div>\n                        <IconButton size=\"small\" className=\"hover-only\" onClick={() => {\n                            var curr = moment().year(this.state.year).month(this.state.month).date(i + 1);\n                            console.log(curr);\n                            this.setState({\n                                addingTask: true,\n                                addTaskDate: curr,\n                            })\n                            console.log(this.state);\n                        }}>\n                            <AddIcon />\n                        </IconButton>\n                    </div>\n                    <ul>\n                        {todayTasks.map((task) =>\n                        <li><MiniTask\n                            overdue={overdue}\n                            content={task.content}\n                            key={task._id}\n                            id={task._id}\n                            complete={task.completed} />\n                        </li>)}\n                    </ul>\n                </div>\n            </td>\n        }\n\n        var totalSlots = [...blanks, ...daysInMonth];\n        let rows = [];\n        let cells = [];\n        totalSlots.forEach((row, i) => {\n            if (i % 7 !== 0) {\n                cells.push(row);\n            } else {\n                rows.push(cells);\n                cells = [];\n                cells.push(row);\n            }\n            if (i === totalSlots.length - 1) {\n                rows.push(cells);\n            }\n        });\n\n        let weekdayshortname = weekdayshort.map(day => {\n            return (\n                <th key={day} className=\"weekday-label\">\n                    {day}\n                </th>\n            )\n        });\n\n        let daysinmonth = rows.map((d, i) => {\n            return <tr>{d}</tr>\n        })\n\n        return (\n            // <div>Calendar</div>\n            <div className=\"container d-flex justify-content-center\">\n                {this.state.addingTask && <AddCalendarTask addTask={this.addTask} exitAddTask={this.exitAddTask} date={this.state.addTaskDate} />}\n                <div className=\"calendar\">\n                    <div className=\"calendar-month\">{this.state.dateObject.format(\"MMMM\")}</div>\n                    <table className=\"\">\n                        <thead>\n                            <tr>{weekdayshortname}</tr>\n                        </thead>\n                        <tbody>{daysinmonth}</tbody>\n                    </table>\n                </div>\n            </div>\n        )\n    }\n}\n\n\nexport default Calendar;"]},"metadata":{},"sourceType":"module"}